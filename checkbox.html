<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="vue.js" charset="utf-8"></script>
  </head>
  <body>
    <section id="app">
      <div class="">
        <input type="checkbox"  @click="checkedAll" v-model="checked">
        <span>全选</span>
      </div>
      <div class="items" v-for="item in datas">
        <input type="checkbox" :value=item.id v-model="selected">{{item.id}}
      </div>
      <span>checked:{{selected}}</span>
    </section>
  </body>
  <script>
    var
      vm = new Vue({
        el: '#app',
        data: function(){
          return{
            selected: [],
            datas: [
              {id: 1},
              {id: 2},
              {id: 3}
            ],
            checked: null
          }
        },
        methods: {
          checkedAll: function() {
            var _this = this;
            if (_this.checked) {
              _this.selected = [];
            }else{
              _this.selected = [];
              _this.datas.forEach(function(item) {
                _this.selected.push(item.id);
              });
            }
          }
        },
        watch: {
          selected: {
            handler: function(){
              this.checked = (this.selected.length === this.datas.length)
            },
            deep: true
          }
        }
      })
  </script>
</html>
